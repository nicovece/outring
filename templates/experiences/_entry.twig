{% extends "_layouts/base.twig" %}
{% import "_macros" as macros %}

{% block title %}
	{{ entry.title }}- {{ siteName }}
{% endblock %}

{% block content %}
	<article class="experience">
		<header>
			<h1>{{ entry.experienceType }}</h1>
		</header>
		<section class="hero-section-- container-wide">
			{% if entry.featuredImage|length %}
				{% include "_modules/hero-image" with {
					image: entry.featuredImage.one(),
					caption: entry.featuredImageCaption
				} only %}
			{% endif %}
			<h1>{{ entry.title }}</h1>
			{% if entry.shortQuote %}
				<p>
					"{{ entry.shortQuote }}"
				</p>
			{% endif %}
		</section>
		{{ entry.experienceType.label }}
		{% set date = entry.dateOfExperience %}
		{% if date %}
			<p>
				{{ date|date("F Y") }}
			</p>
		{% endif %}
		{% set place = entry.place.one() %}
		{% if place %}
			<p>
				<a href="{{ place.url }}">{{ place.title }}</a>
			</p>
		{% endif %}
		{% set themes = entry.themes.all() %}
		{% for theme in themes %}
			{{ theme.title }}{% if not loop.last %}, {% endif %}
		{% endfor %}
		{# Body Content - Matrix Blocks #}
		{% for block in entry.body.all() %}
			{% switch block.type %}
				{% case "richText" %}
					{% include "_partials/_experience-blocks/rich-text" with {
						block
					} only %}
				{% case "pullQuote" %}
					{% include "_partials/_experience-blocks/pull-quote" with {
						block
					} only %}
				{% case "imageBlock" %}
					{% include "_partials/_experience-blocks/image-block" with {
						block
					} only %}
				{% case "callout" %}
					{% include "_partials/_experience-blocks/callout" with {
						block
					} only %}
				{% case "beforeAfter" %}
					{% include "_partials/_experience-blocks/before-after" with {
						block
					} only %}
				{% default %}
					<p class="text-red-500">
						Unknown block type: {{ block.type }}
					</p>
			{% endswitch %}
		{% endfor %}
		{# People Involved #}
		{% if entry.peopleInvolved|length %}
			<section class="people-involved mt-12 border-t border-gray-200 pt-12">
				<h2 class="mb-6 text-2xl font-bold">People Involved</h2>
				<div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
					{% for person in entry.peopleInvolved.all() %}
						<div class="person-card">
							{% if person.involvedPersonPhoto|length %}
								{% set photo = person.involvedPersonPhoto.one() %}
								<img
									src="{{
									photo.getUrl({
										width: 160,
										height: 160,
										mode: "crop"
									})
									}}"
									srcset="{{ macros.srcSet(photo, true, "1:1") }}"
									sizes="80px"
									alt="{{ person.involvedPersonName }}"
									class="mb-3 h-20 w-20 rounded-full object-cover"
								/>
							{% endif %}
							<h3 class="font-bold">{{ person.involvedPersonName }}</h3>
							<p class="text-sm text-gray-600">
								{{ person.involvedPersonRole }}
							</p>
						</div>
					{% endfor %}
				</div>
			</section>
		{% endif %}
	</article>
{% endblock %}
