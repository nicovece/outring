{% extends '_layouts/base.twig' %}

{% block title %}
	{{ entry.title }} - Themes - {{ siteName }}
{% endblock %}

{% block content %}
	<div class="mx-auto max-w-6xl px-4 py-16">
		{# Theme Header #}
		<header class="mb-12">
			<h1 class="mb-4 text-4xl font-bold">{{ entry.title }}</h1>
			{% if entry.text %}
				<div class="text-gray-600 prose text-xl">
					{{ entry.text }}
				</div>
			{% endif %}
		</header>

		{# Experiences with this theme #}
		{% set experiences =
			craft.entries().section('experiences').relatedTo(entry).with(['featuredImage', 'place']).orderBy(
				'dateOfExperience DESC'
			).all()
		%}

		{% if experiences|length %}
			<h2 class="mb-6 text-2xl font-bold">Experiences ({{ experiences|length }})</h2>

			<div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
				{% for experience in experiences %}
					<article class="experience-card border-gray-200 overflow-hidden rounded-lg border transition hover:shadow-lg">
						{% if experience.featuredImage|length %}
							{% set image = experience.featuredImage.one() %}
							<a href="{{ experience.url }}">
								<img src="{{ image.url }}" alt="{{ image.title }}" class="h-48 w-full object-cover" loading="lazy" />
							</a>
						{% endif %}

						<div class="p-6">
							<h3 class="mb-2 text-xl font-bold">
								<a href="{{ experience.url }}" class="hover:text-gray-600">{{ experience.title }}</a>
							</h3>

							{% if experience.shortQuote %}
								<p class="text-gray-600 mb-4 text-sm italic">
									"{{ experience.shortQuote }}"
								</p>
							{% endif %}

							{% set place = experience.place.one() %}
							{% if place %}
								<div class="text-gray-500 text-sm">
									{{ place.title }}
								</div>
							{% endif %}
						</div>
					</article>
				{% endfor %}
			</div>
		{% else %}
			<p class="text-gray-600">
				No experiences with this theme yet.
			</p>
		{% endif %}
	</div>
{% endblock %}
